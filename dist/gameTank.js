/* wzwgame v1.0.0 by Microanswer,doc:http://test.microanswer.cn/wzwgame/index.html */
!function(t){var h=t.WzwScreen,o=t.WzwBomb,s=[550,540,530,520,500,490,480,470,450,430,410,400,380,350,340,330,300,280,260,240,200],e={0:15,1:20,2:25,3:32,4:40,5:50,6:60,7:75,8:90,9:100,10:110,11:120,12:130,13:140,14:150,15:160,16:170,17:180,18:190,19:200,20:300},a={HERO:1,FOE:2},r={UP:1,RIGHT:2,BOTTOM:3,LEFT:4,UP_ARR:function(){return[[0,1,0],[1,1,1],[1,0,1]]},RIGHT_ARR:function(){return[[1,1,0],[0,1,1],[1,1,0]]},BOTTOM_ARR:function(){return[[1,0,1],[1,1,1],[0,1,0]]},LEFT_ARR:function(){return[[0,1,1],[1,1,0],[0,1,1]]}},i={NORMAL:1,KILLED:2,PAUSED:3,GAMEOVER:6};function n(t,o){this.tanker=t,this.direction=this.tanker.direction,this.time=42,this.available=!0,this.onUnAvailable=o,this.initBallOffset()}function f(t,o,s,e,i){this.width=3,this.height=3,this.offsetRow=t,this.offsetCol=o,this.role=s,this.direction=e,this.balls=[],this.tank=i,this.launch=i.launch,this.heropointtime=20,this.initAtoms(),this.init()}function l(t,o,s,e){this.boss=!0,this.direction=r.BOTTOM,this.offsetRow=-8,this.offsetCol=t,this.hp=o,this.tank=e,this.launch=e.launch,this.balls=[],this.role=a.FOE,this.fram=[[1,1,0,0,0,1,1],[0,1,0,0,0,1,0],[1,0,1,1,1,0,1],[0,1,1,0,1,1,0],[1,0,1,1,1,0,1],[0,1,0,1,0,1,0],[1,1,0,1,0,1,1],[0,0,0,1,0,0,0]],this.status=l.STATUS.SHOWING,this.moveStepTime=s,this.way="left",this.wayCount=1,this.showingStepTime=100}function u(){(function(){this.preview_index=0,this.preview_lasttime=Date.now(),this.preview_timespace=200,this.previewAtom=[[[1,0,1,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,0,0,0,0,0,0,0],[0,0,0,1,1,0,0,1,0,0,0],[0,0,1,1,0,0,0,0,0,0,0]],[[1,0,1,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,1,0],[0,0,1,1,0,0,0,0,0,0,0],[0,0,0,1,1,0,0,0,1,0,0],[0,0,1,1,0,0,0,0,0,0,0]],[[1,0,1,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,0,0,0,0,1,0],[0,0,0,0,1,1,0,0,0,1,0],[0,0,0,1,1,0,0,0,0,0,0]],[[1,1,0,0,0,0,0,0,0,0,0],[0,1,1,0,0,0,0,0,0,1,0],[1,1,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0],[0,1,0,0,0,1,1,0,0,1,1],[0,0,0,0,1,1,0,0,0,0,0]],[[0,1,1,0,0,0,0,0,0,0,0],[0,0,1,1,1,0,0,0,0,1,0],[0,1,1,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,0,0],[0,0,0,0,0,0,1,1,0,0,0],[0,1,0,0,0,1,1,0,0,1,0]],[[0,1,1,0,0,0,0,0,0,1,0],[0,0,1,1,0,1,0,0,1,1,1],[0,1,1,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0]],[[0,1,1,0,0,0,0,0,0,1,1],[0,0,1,1,0,0,1,0,1,1,0],[0,1,1,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,1,0,1,0,0,0,0,0,1,1],[0,1,1,1,0,0,0,1,1,1,0],[0,0,1,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,0,0,0],[0,1,1,1,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,0,0,0],[0,1,1,1,0,0,1,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,1,0,0,0,0],[0,1,1,1,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]]]}).call(this)}function c(){if(this.bomb=void 0,this.hreo=function(){if(this.lifeCount<=0)return null;this.lifeCount=this.lifeCount-1;for(var t=0;t<4-this.lifeCount;t++)this.lifes[t]=[0,0,0,0];var o=9,s=4;this.bossMod&&(o=this.launch.screen.option.atomRowCount-3,s=0);return new f(o,s,a.HERO,r.UP,this)}.call(this),!this.hreo)return this.status=i.GAMEOVER,void function(){var s=this;s.status=i.PAUSED,s.launch.screen.playAnim(h.ANIM.B2T,function(t,o){0===o&&(s.onDestroy(),s.launch.exitCurentGame())})}.call(this);this.tankers=[],this.status=i.NORMAL}function p(t,o,s){for(var e=0;e<t.length;e++){for(var i=0;i<o.length;i++)if(o[i].isAtomIn(t[e][0],t[e][1]))return 1;if(s&&s.isAtomIn(t[e][0],t[e][1]))return 1}}n.prototype.initBallOffset=function(){if(this.tanker.boss)return this.offsetRow=this.tanker.offsetRow+7,void(this.offsetCol=this.tanker.offsetCol+3);if(this.tanker.direction===r.UP)this.offsetRow=this.tanker.offsetRow,this.offsetCol=this.tanker.offsetCol+1;else if(this.tanker.direction===r.RIGHT)this.offsetRow=this.tanker.offsetRow+1,this.offsetCol=this.tanker.offsetCol+2;else if(this.tanker.direction===r.BOTTOM)this.offsetRow=this.tanker.offsetRow+2,this.offsetCol=this.tanker.offsetCol+1;else{if(this.tanker.direction!==r.LEFT)throw new Error("未知的坦克方向。");this.offsetRow=this.tanker.offsetRow+1,this.offsetCol=this.tanker.offsetCol}},n.prototype.update=function(){this.available&&(Date.now()-(this.lastTime||0)>=this.time&&(this.direction===r.UP?this.offsetRow=this.offsetRow-1:this.direction===r.RIGHT?this.offsetCol=this.offsetCol+1:this.direction===r.BOTTOM?this.offsetRow=this.offsetRow+1:this.direction===r.LEFT&&(this.offsetCol=this.offsetCol-1),this.lastTime=Date.now()),this.offsetAvailable(),this.checkKilled())},n.prototype.offsetAvailable=function(){(this.offsetRow<0||this.offsetRow>=this.tanker.launch.screen.option.atomRowCount||this.offsetCol<0||this.offsetCol>=this.tanker.launch.screen.option.atomColCount)&&(this.available=!1,this.onUnAvailable&&this.onUnAvailable(this))},n.prototype.checkKilled=function(){var s=this;try{if(s.tanker.role===a.HERO){if(h.each(s.tanker.tank.tankers,function(t,o){if(t.isAtomIn(s.offsetRow,s.offsetCol))throw{message:"killed",index:o,tanker:t}}),s.tanker.tank.boss&&s.tanker.tank.boss.isAtomIn(s.offsetRow,s.offsetCol)){if(s.tanker.tank.boss.isAtomInGun(s.offsetRow,s.offsetCol))throw{message:"killed",index:0,tanker:s.tanker.tank.boss};throw{message:"hited",index:0}}}else if(s.tanker.role===a.FOE){if(s.tanker.tank.hreo&&s.tanker.tank.hreo.isAtomIn(s.offsetRow,s.offsetCol))throw{message:"killed",index:0,tanker:s.tanker.tank.hreo};if(s.tanker.tank.hreo&&s.tanker.tank.hreo.isAtomInAtom(s.offsetRow,s.offsetCol))throw{message:"hited",index:0}}}catch(t){"killed"===t.message?(t.tanker.role===a.FOE?t.tanker.boss?s.tanker.tank.onBossKill():(s.tanker.tank.tankers.splice(t.index,1),s.tanker.tank.onEofKill()):t.tanker.role===a.HERO&&s.available&&s.tanker.tank.status===i.NORMAL&&s.tanker.tank.onHeroKill(),s.available=!1,s.onUnAvailable&&s.onUnAvailable(s)):"hited"===t.message?(s.available=!1,s.onUnAvailable&&s.onUnAvailable(s)):console.warn("异常：",t)}},f.prototype.init=function(){this.role===a.FOE&&6<h.random(0,10)&&this.shoot()},f.prototype.initAtoms=function(){switch(this.direction){case r.UP:this.atoms=r.UP_ARR();break;case r.RIGHT:this.atoms=r.RIGHT_ARR();break;case r.BOTTOM:this.atoms=r.BOTTOM_ARR();break;case r.LEFT:this.atoms=r.LEFT_ARR();break;default:throw new Error("不支持的方向")}},f.prototype.applyAtom=function(t){for(var o=0;o<this.height;o++)for(var s=0;s<this.width;s++)(1===o&&1===s||1===this.atoms[o][s])&&(t[this.offsetRow+o][this.offsetCol+s]=this.atoms[o][s]);for(o=0;o<this.balls.length;o++){var e=this.balls[o];e.available&&(t[e.offsetRow][e.offsetCol]=1)}},f.prototype.update=function(){this.role===a.HERO&&Date.now()-(this.heropointLastTime||0)>=this.heropointtime&&(this.atoms[1][1]=1===this.atoms[1][1]?0:1,this.heropointLastTime=Date.now());for(var t=0;t<this.balls.length;t++)this.balls[t].available&&this.balls[t].update()},f.prototype.updateEOF=function(){30<=h.random(0,100)?this.moveTo(this.direction,1):this.moveTo(this.getDiffDirection(),1),70<=h.random(0,100)&&this.shoot()},f.prototype.turnTo=function(t){this.atoms=r.UP_ARR(),this.direction=r.UP},f.prototype.moveTo=function(t,o){switch(t){case r.UP:this.moveToUp(o);break;case r.RIGHT:this.moveToRight(o);break;case r.BOTTOM:this.moveToBottom(o);break;case r.LEFT:this.moveToLeft(o);break;default:throw new Error("未知的方向:"+t)}},f.prototype.moveToUp=function(t,o){if(this.direction!==r.UP&&!o)return this.direction=r.UP,void(this.atoms=r.UP_ARR());this.offsetRow<=0||this.hasTankerOn(r.UP)||(this.offsetRow-=t)},f.prototype.moveToRight=function(t,o){if(this.direction!==r.RIGHT&&!o)return this.direction=r.RIGHT,void(this.atoms=r.RIGHT_ARR());this.offsetCol+2>=this.launch.screen.option.atomColCount-1||this.hasTankerOn(r.RIGHT)||(this.offsetCol+=t)},f.prototype.moveToBottom=function(t,o){if(this.direction!==r.BOTTOM&&!o)return this.direction=r.BOTTOM,void(this.atoms=r.BOTTOM_ARR());this.offsetRow+2>=this.launch.screen.option.atomRowCount-1||this.hasTankerOn(r.BOTTOM)||(this.offsetRow+=t)},f.prototype.moveToLeft=function(t,o){if(this.direction!==r.LEFT&&!o)return this.direction=r.LEFT,void(this.atoms=r.LEFT_ARR());this.offsetCol<=0||this.hasTankerOn(r.LEFT)||(this.offsetCol-=t)},f.prototype.hasTankerOn=function(t){try{var s=0,e=0;switch(t){case r.LEFT:s=-1;break;case r.UP:e=-1;break;case r.RIGHT:s=1;break;case r.BOTTOM:e=1}var i=this,n=i.getSideAtoms(t);h.each(i.tank.tankers,function(o){i!==o&&h.each(n,function(t){if(o.isAtomIn(t[0]+e,t[1]+s))throw"yes"})}),i.role===a.FOE&&h.each(n,function(t){if(i.tank.hreo&&i.tank.hreo.isAtomIn(t[0]+e,t[1]+s))throw"yes"})}catch(t){return!0}return!1},f.prototype.getSideAtoms=function(t){switch(t){case r.LEFT:return[[this.offsetRow+0,this.offsetCol+1],[this.offsetRow+1,this.offsetCol+0],[this.offsetRow+2,this.offsetCol+1]];case r.UP:return[[this.offsetRow+1,this.offsetCol+0],[this.offsetRow+0,this.offsetCol+1],[this.offsetRow+1,this.offsetCol+2]];case r.RIGHT:return[[this.offsetRow+0,this.offsetCol+1],[this.offsetRow+1,this.offsetCol+2],[this.offsetRow+2,this.offsetCol+1]];case r.BOTTOM:return[[this.offsetRow+1,this.offsetCol+0],[this.offsetRow+2,this.offsetCol+1],[this.offsetRow+1,this.offsetCol+2]]}},f.prototype.shoot=function(){var t,s=this;s.tank.status===i.KILLED&&s.role===a.HERO||2<=s.balls.length||(t=new n(this,function(t){var o=s.balls.indexOf(t);o<=-1||s.balls.splice(o,1)}),s.balls.push(t))},f.prototype.isAtomIn=function(t,o){return this.offsetRow<=t&&t<=this.offsetRow+2&&this.offsetCol<=o&&o<=this.offsetCol+2},f.prototype.isAtomInAtom=function(t,o){for(var s=0;s<this.balls.length;s++){var e=this.balls[s];if(e.available&&(e.offsetRow===t&&e.offsetCol===o))return e.available=!1,e.onUnAvailable&&e.onUnAvailable(e),!0}return!1},f.prototype.getDiffDirection=function(){var t;return this.direction===r.UP?t=[r.RIGHT,r.BOTTOM,r.LEFT]:this.direction===r.RIGHT?t=[r.LEFT,r.BOTTOM,r.LEFT]:this.direction===r.BOTTOM?t=[r.RIGHT,r.UP,r.LEFT]:this.direction===r.LEFT&&(t=[r.RIGHT,r.BOTTOM,r.UP]),t[h.random(0,t.length)]},l.prototype.updateAndApply=function(t){if(this.status===l.STATUS.SHOWING?Date.now()-(this.lastStepTime||0)>=this.showingStepTime&&(this.offsetRow+=1,0<=this.offsetRow&&(this.status=l.STATUS.SHOWED),this.lastStepTime=Date.now()):this.status===l.STATUS.SHOWED?Date.now()-(this.lastStepTime||0)>=this.moveStepTime&&("left"===this.way&&(this.offsetCol-=this.wayCount,this.offsetCol<0&&(this.way="right")),"right"===this.way&&(this.offsetCol+=this.wayCount,this.offsetCol+7>=this.tank.launch.screen.option.atomColCount&&(this.way="left")),this.shoot(),this.lastStepTime=Date.now()):this.status===l.STATUS.RUNAWAYING&&Date.now()-(this.lastStepTime||0)>=this.showingStepTime&&(--this.offsetRow,this.offsetRow<=-8&&(this.status=l.STATUS.RUNAWAYED,this.onRunAwayFun&&this.onRunAwayFun.call(this)),this.lastStepTime=Date.now()),h.mergeArr(this.fram,t,this.offsetRow,this.offsetCol),this.status===l.STATUS.SHOWED)for(var o=0;o<this.balls.length;o++){var s=this.balls[o];s.update(),s.available&&(t[s.offsetRow][s.offsetCol]=1)}},l.prototype.shoot=function(){var s=this,t=new n(s,function(t){var o=s.balls.indexOf(t);o<=-1||s.balls.splice(o,1)});s.balls.push(t)},l.prototype.hpDown=function(){--this.hp},l.prototype.getHp=function(){return this.hp},l.prototype.runAway=function(){this.status=l.STATUS.RUNAWAYING},l.prototype.setOnRunAway=function(t){this.onRunAwayFun=t},l.prototype.isAtomInGun=function(t,o){return this.status===l.STATUS.SHOWED&&(t===this.offsetRow+6&&this.offsetCol+3===o)},l.prototype.isAtomIn=function(t,o){return this.offsetRow<=t&&t<=this.offsetRow+6&&this.offsetCol<=o&&o<=this.offsetCol+6},l.STATUS={SHOWING:1,SHOWED:2,RUNAWAYING:3,RUNAWAYED:4},u.prototype.onRegLaunch=function(t){this.launch=t},u.prototype.getPreviewAtoms=function(){return Date.now()-this.preview_lasttime>=this.preview_timespace&&(this.preview_index++,this.preview_index>=this.previewAtom.length-1&&(this.preview_index=0),this.preview_lasttime=Date.now()),this.previewAtom[this.preview_index]},u.prototype.onLaunch=function(){(function(){this.level=0,this.shotCount=0,this.score=0,this.lifes=[[0,0,0,0]],this.lifeCount=3;for(var t=0;t<this.lifeCount;t++)this.lifes.push([1,1,1,1]);c.call(this)}).call(this)},u.prototype.onUpdate=function(){if(this.status===i.PAUSED)return this.atoms;if(this.atoms=this.launch.screen.makeNewArr(),this.bossMod)this.boss&&this.boss.updateAndApply(this.atoms);else{if(this.tankers)for(var t=0;t<this.tankers.length;t++)this.tankers[t].update(),this.tankers[t].applyAtom(this.atoms);if(Date.now()-(this.gameLastTime||0)>=s[this.level]){if(function(){if(3<=this.tankers.length)return;var t=function(t,o){var s=[];p(this.topLeftJudgeArr=this.topLeftJudgeArr||[[0,2],[1,2],[2,2],[2,0],[2,1]],t,o)||s.push("top_left");p(this.topRightJudgeArr=this.topRightJudgeArr||[[0,this.launch.screen.option.atomColCount-3],[1,this.launch.screen.option.atomColCount-3],[2,this.launch.screen.option.atomColCount-3],[2,this.launch.screen.option.atomColCount-2],[2,this.launch.screen.option.atomColCount-1]],t,o)||s.push("top_right");p(this.bottomLeftJudgeArr=this.bottomLeftJudgeArr||[[this.launch.screen.option.atomRowCount-1,2],[this.launch.screen.option.atomRowCount-2,2],[this.launch.screen.option.atomRowCount-3,2],[this.launch.screen.option.atomRowCount-3,1],[this.launch.screen.option.atomRowCount-3,0]],t,o)||s.push("bottom_left");p(this.bottomRightJudgeArr=this.bottomRightJudgeArr||[[this.launch.screen.option.atomRowCount-1,this.launch.screen.option.atomColCount-3],[this.launch.screen.option.atomRowCount-2,this.launch.screen.option.atomColCount-3],[this.launch.screen.option.atomRowCount-3,this.launch.screen.option.atomColCount-3],[this.launch.screen.option.atomRowCount-3,this.launch.screen.option.atomColCount-2],[this.launch.screen.option.atomRowCount-3,this.launch.screen.option.atomColCount-1]],t,o)||s.push("bottom_right");return s}.call(this,this.tankers,this.hreo),o=t[h.random(0,t.length)];"top_left"===o?this.tankers.push(new f(0,0,a.FOE,r.BOTTOM,this)):"top_right"===o?this.tankers.push(new f(0,this.launch.screen.option.atomColCount-3,a.FOE,r.BOTTOM,this)):"bottom_left"===o?this.tankers.push(new f(this.launch.screen.option.atomRowCount-3,0,a.FOE,r.UP,this)):"bottom_right"===o&&this.tankers.push(new f(this.launch.screen.option.atomRowCount-3,this.launch.screen.option.atomColCount-3,a.FOE,r.UP,this))}.call(this),this.tankers)for(t=0;t<this.tankers.length;t++)this.tankers[t].updateEOF();this.gameLastTime=Date.now()}}return this.hreo&&(this.hreo.update(),this.hreo.applyAtom(this.atoms)),this.bomb&&this.status===i.KILLED&&(this.bomb.update(),h.mergeArr(this.bomb.getCurrentFrame(),this.atoms,this.bomb.offsetRow,this.bomb.offsetCol)),this.atoms},u.prototype.onUpdateStatus=function(){return this.lifes},u.prototype.onDestroy=function(){this.hreo=void 0,this.score=0,this.level=0,this.tankers=[],this.bomb=void 0,this.status=i.GAMEOVER,this.boss=void 0,this.bossMod=!1,this.launch.screen.setBest(0),this.launch.screen.setScore(0),this.launch.screen.setLevel(0),this.launch.screen.setPause(!1)},u.prototype.onKeyup=function(t){"start"===t&&(this.status===i.PAUSED?(this.status=this.oldStatus,this.launch.screen.setPause(!1)):(this.oldStatus=this.status,this.status=i.PAUSED,this.launch.screen.setPause(!0)))},u.prototype.onKeyDown=function(t){if(this.hreo&&!this.autoMoving)if("up"===t){if(this.bossMod)return;this.hreo.moveToUp(1)}else if("right"===t)this.hreo.moveToRight(1,!!this.bossMod);else if("down"===t){if(this.bossMod)return;this.hreo.moveToBottom(1)}else"left"===t?this.hreo.moveToLeft(1,!!this.bossMod):"rotate"===t&&this.hreo.shoot()},u.prototype.goto=function(o,s){var e=100,i=this;i.autoMoving=!0,setTimeout(function t(){if(i.hreo.offsetCol!==o[1]){if(i.hreo.offsetCol<o[1])return i.hreo.moveToRight(1),void setTimeout(t,e);if(i.hreo.offsetCol>o[1])return i.hreo.moveToLeft(1),void setTimeout(t,e)}else if(i.hreo.offsetRow!==o[0]){if(i.hreo.offsetRow<o[0])return i.hreo.moveToBottom(1),void setTimeout(t,e);if(i.hreo.offsetRow>o[0])return i.hreo.moveToUp(1),void setTimeout(t,e)}else s&&s.call(i),i.autoMoving=!1},2*e)},u.prototype.onEofKill=function(){this.score+=1,this.shotCount+=1,this.launch.screen.setScore(this.score),this.shotCount>=e[String(this.level)]&&this.levelUp()},u.prototype.levelUp=function(){var t=this;t.bossMod=!0,t.tankers=[],t.goto([this.launch.screen.option.atomRowCount-3,parseInt((this.launch.screen.option.atomColCount-1)/2-1)],function(){t.hreo.turnTo(r.UP),t.boss=new l(2,t.level+3,460,t),t.boss.setOnRunAway(function(){t.level+=1,t.shotCount=0,t.launch.screen.setLevel(t.level),t.boss=void 0,t.goto([parseInt((this.launch.screen.option.atomRowCount-1)/2-1),parseInt((this.launch.screen.option.atomColCount-1)/2-1)],function(){t.bossMod=!1})})})},u.prototype.onBossKill=function(){this.boss.hpDown(),this.boss.getHp()<=0&&this.boss.runAway()},u.prototype.onHeroKill=function(){this.status=i.KILLED;var t=this;t.bomb=new o({offsetRow:t.hreo.offsetRow,offsetCol:t.hreo.offsetCol,onEnd:function(){c.call(t)}}),this.hreo=void 0},t.Tank=u}(window);