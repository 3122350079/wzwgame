/*! By Microanswer.  url:https://www.microanswer.cn version:1.0.0 */!function(t){var e={};function o(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(s,i,function(e){return t[e]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="./",o(o.s=1)}([function(t,e,o){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i={width:190,height:250,atomRowCount:21,atomColCount:11,atomBorder:1.5,atomInset:2,atomSpace:3,splitPosition:.7,splitSize:1,fontSize:13,fontHeight:15,background:"#9facaa",color1:"#000000",color2:"#8f9997"},n={score:"Score",best:"Best",level:"Level",pause:"PAUSE",fps:"FPS"};function r(t,e){if("string"==typeof t)this.dom=document.querySelector(t);else{if("object"!==s(t))throw new Error("未知的选择器。");t.jquery&&t.length>0?this.dom=t[0]:this.dom=t}this.option=r.assign({},i,e||{}),this.testspan=this.option.testspan,a.call(this),h.call(this),f.call(this),l.call(this)}function a(){this.atoms=void 0,this.statusAtoms=void 0,this.fps=60,this.score=0,this.paused=!1,this.level=0,this.best=0}function h(){var t=document.createElement("canvas");t.width=t.style.width=this.option.width,t.height=t.style.height=this.option.height,t.style.margin="0",t.style.padding="0",t.style.background=this.option.background,this.canvasDom=t,this.dom.appendChild(t),this.canvas=this.canvasDom.getContext("2d")}function f(){var t={};t.splitPosition=this.option.width*this.option.splitPosition,t.atomSpace=this.option.atomSpace||1,t.atomWidth=(t.splitPosition-t.atomSpace*(this.option.atomColCount+1))/this.option.atomColCount,t.atomHeight=(this.option.height-t.atomSpace*(this.option.atomRowCount+1))/this.option.atomRowCount,t.fontItalic="italic normal "+this.option.fontSize+"px arial",t.fontBold="normal bold "+this.option.fontSize+"px arial",this.drawParam=t}function u(){this.logicFun&&this.logicFun()}function l(){var t=this,e=0,o="";setInterval((function(){t.fps=e,e=0}),1e3),function s(){var i=Date.now();e+=1,u.call(t);var n=Date.now();c.call(t,t.canvas);var r=Date.now();window.requestAnimationFrame?(o="requestAnimationFrame",window.requestAnimationFrame(s)):window.webkitRequestAnimationFrame?(o="webkitRequestAnimationFrame",window.webkitRequestAnimationFrame(s)):(o="setTimeout",setTimeout(s,16));var a=Date.now();t.testspan&&(t.testspan.innerText="逻辑耗时："+(n-i)+"ms, 绘制耗时："+(r-n)+"ms, 帧请求("+o+")耗时："+(a-r)+"ms, 帧间隔:"+(i-t.lastttime)+"ms"),t.lastttime=Date.now()}()}function c(t){t.clearRect(0,0,this.option.width,this.option.height),t.save(),t.beginPath();var e=t.fillStyle;t.fillStyle=this.option.background,t.fillRect(0,0,this.option.width,this.option.height),t.fillStyle=e,m.call(this,t);var o=t.strokeStyle,s=t.lineWidth;t.strokeStyle=this.option.color1,t.lineWidth=this.option.splitSize,t.moveTo(this.drawParam.splitPosition,0),t.lineTo(this.drawParam.splitPosition,this.option.height),t.stroke(),t.strokeStyle=o,t.lineWidth=s,d.call(this,t),t.closePath(),t.restore()}function m(t){var e=this,o=0,s=0,i=t.fillStyle,n=t.strokeStyle,a=t.lineWidth;r.each(e.option.atomRowCount,(function(i,n){o+=e.drawParam.atomSpace,s=0,r.each(e.option.atomColCount,(function(i,r){s+=e.drawParam.atomSpace;var a=0;if(e.atoms?(a=e.atoms[n][r],p.call(e,t,a,o,s)):p.call(e,t,a,o,s),e.animArr){var h=e.animArr[n][r];h!==a&&1===h&&p.call(e,t,h,o,s)}s+=e.drawParam.atomWidth})),o+=e.drawParam.atomHeight})),t.fillStyle=i,t.strokeStyle=n,t.lineWidth=a}function p(t,e,o,s){t.strokeStyle=t.fillStyle=e>0?this.option.color1:this.option.color2,t.lineWidth=this.option.atomBorder,t.strokeRect(s,o,this.drawParam.atomWidth,this.drawParam.atomHeight),t.fillRect(s+this.option.atomInset,o+this.option.atomInset,this.drawParam.atomWidth-2*this.option.atomInset,this.drawParam.atomHeight-2*this.option.atomInset)}function d(t){var e=this,o=t.fillStyle,s=t.lineWidth,i=t.strokeStyle,a=t.font,h=e.option.fontHeight,f=e.drawParam.splitPosition+5;t.strokeStyle=e.option.color1,t.fillStyle=e.option.color1,t.font=e.drawParam.fontItalic,t.fillText(n.score,f,h),t.font=e.drawParam.fontBold,t.fillText(e.score,f,h+=e.option.fontHeight),t.font=e.drawParam.fontItalic,t.fillText(n.level,f,h+=e.option.fontHeight),t.font=e.drawParam.fontBold,t.fillText(e.level,f,h+=e.option.fontHeight);var u=h+5,l=f;r.each(4,(function(o,s){u+=e.drawParam.atomSpace,l=f,r.each(4,(function(o,i){l+=e.drawParam.atomSpace,p.call(e,t,e.statusAtoms?e.statusAtoms[s][i]:0,u,l),l+=e.drawParam.atomWidth})),u+=e.drawParam.atomHeight})),h=u+5,t.strokeStyle=t.fillStyle=e.option.color1,t.font=e.drawParam.fontItalic,t.fillText(n.best,f,h+=e.option.fontHeight),t.font=e.drawParam.fontBold,t.fillText(e.best,f,h+=e.option.fontHeight),h+=5,t.fillStyle=e.paused?e.option.color1:e.option.color2,t.font=e.drawParam.fontItalic,t.fillText(n.pause,f,h+=e.option.fontHeight),t.strokeStyle=t.fillStyle=e.option.color1,t.font=e.drawParam.fontItalic,t.fillText(n.fps,f,e.option.height-e.option.fontHeight-2),t.font=e.drawParam.fontBold,t.fillText(e.fps,f,e.option.height-2),t.font=a,t.strokeStyle=i,t.fillStyle=o,t.lineWidth=s}function w(t,e,o){var s=this;if(e<t.animArr.length){var i=function(e){var o=n[e];if(o)return s.animResult!==t?"kill":void(s.animArr=o)},n=t.animArr[e],a=t.animTime[e];r.scroll(0,n.length,{goo:i,end:function(n){i(n),o&&o(t.animName,e),w.call(s,t,e+1,o)},kill:function(){o&&o(t.animName,-1)}},a)}else s.animArr=void 0}function v(){return this.makeNewArr((function(t,e){return[t,e]}))}r.prototype.reset=function(){a.call(this)},r.prototype.makeNewArr=function(t){var e=this,o=[];return r.each(e.option.atomRowCount,(function(s,i){o[i]=[],r.each(e.option.atomColCount,(function(e,s){o[i][s]=t?t(i,s):0}))})),o},r.prototype.playAnim=function(t,e){if(!t)throw new Error("请指定要执行的动画。");var o=t.call(this);if(o.animArr.length!==o.animTime.length)throw new Error("时间配置与动画不匹配。");this.animArr=this.makeNewArr(),this.animResult=o,w.call(this,o,0,e)},r.prototype.updateAtomArr=function(t){this.atoms=void 0,this.atoms=t},r.prototype.updateStatusAtoms=function(t){this.statusAtoms=void 0,this.statusAtoms=t},r.prototype.regLogic=function(t){this.logicFun=t},r.prototype.setLevel=function(t){this.level=t},r.prototype.setScore=function(t){this.score=t},r.prototype.setPause=function(t){this.paused=t},r.prototype.setBest=function(t){this.best=t},r.assign=function(){var t=arguments[0];if(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];if(o)for(var s in o)t[s]=o[s]}return t}},r.each=function(t,e){if(t)if(Array.isArray(t))for(var o=0;o<t.length;o++)e&&e(t[o],o,t);else if(Number.isInteger(t))for(var s=1;s<=t;s++)e&&e(s,s-1,t)},r.each2=function(t,e){t&&e&&r.each(t.length,(function(o,s){r.each(o,(function(o,i){e(o,s,i,t)}))}))},r.scroll=function(t,e,o,s){var i=t,n=i=i||0,r=e-n;if(0!==r){var a=!1,h=s||500,f=Date.now();!function t(){setTimeout((function(){var s=Date.now()-f,i=s/h,u=n+Math.floor(i*r);if(!a&&"kill"===(o&&o.goo&&o.goo(u)))return void(o.kill&&o.kill());h<=s?(a=!0,o.end(e)):setTimeout(t,1e3/60)}),1e3/60)}()}else o&&o.end&&o.end(e)},r.mergeArr=function(t,e,o,s,i){o=o||0,s=s||0,r.each(t,(function(t,n){r.each(t,(function(t,r){if(n+o<e.length&&r+s<e[n].length){var a=n+o,h=r+s;if(h<0||a<0)return;e[a][h]=i?i(a,h,n,r):t}}))}))},r.mergeArr2=function(t,e,o,s,i){o=o||0,s=s||0;var n=[];return r.each(e,(function(e,a){n[a]=[],r.each(e,(function(e,r){n[a][r]=e,a>=o&&r>=s&&a<o+t.length&&r<s+t[0].length&&(n[a][r]=i?i(a,r,a-o,r-s):t[a-o][r-s])}))})),n},r.random=function(t,e){return Math.floor(Math.random()*(e-t)+t)};var g={getItem:function(t){console.warn("getItem不支持localstorage、sessionstorage")},setItem:function(t,e){console.warn("setItem不支持localstorage、sessionstorage")},removeItem:function(t){console.warn("removeItem不支持localstorage、sessionstorage")}};function y(t){t=t||{},this.height=4,this.width=4,this.time=50,this.offsetRow=t.offsetRow,this.offsetCol=t.offsetCol,this.frams=[[[1,0,0,1],[0,1,1,0],[0,1,1,0],[1,0,0,1]],[[0,1,1,0],[1,0,0,1],[1,0,0,1],[0,1,1,0]]],this.currentFram=0,this.keepTime=t.keepTime||1e3;var e=this;setTimeout((function(){t.onEnd&&t.onEnd.call(e)}),this.keepTime)}r.storeGet=function(t){var e=(localStorage||sessionStorage||g).getItem(t);return e?JSON.parse(e):e},r.storeSet=function(t,e){return(localStorage||sessionStorage||g).setItem(t,JSON.stringify(e))},r.storeRemove=function(t){return(localStorage||sessionStorage||g).removeItem(t)},r.ANIM={CIRCLE:function(){for(var t=this,e=[],o="l",s=t.option.atomRowCount*t.option.atomColCount,i=v.call(t);e.length<s;){var n=void 0;if("l"===o){for(n=0;n<i.length;n++)e.push(i[n].shift());o="b"}else if("b"===o){var a=i.pop();for(n=0;n<a.length;n++)e.push(a[n]);o="r"}else if("r"===o){for(n=i.length-1;n>=0;n--)e.push(i[n].pop());o="t"}else if("t"===o){var h=i.shift();for(n=h.length-1;n>=0;n--)e.push(h[n]);o="l"}}var f=[];return r.each(e,(function(o,s){var i=t.makeNewArr();r.each(s+1,(function(t,o){var s=e[o];i[s[0]][s[1]]=1})),f.push(i)})),{animName:"CIRCLE",animArr:[f,f.concat([]).reverse()],animTime:[2e3,2e3]}},B2T:function(){var t=this,e=[];return r.each(t.option.atomRowCount,(function(o,s){s=t.option.atomRowCount-o;for(var i=t.makeNewArr(),n=s;n<t.option.atomRowCount;n++)for(var r=0;r<t.option.atomColCount;r++)i[n][r]=1;e.push(i)})),{animName:"B2T",animArr:[e,e.concat([]).reverse()],animTime:[700,700]}},T2B:function(){var t=this,e=[];return r.each(t.option.atomRowCount,(function(o,s){for(var i=t.makeNewArr(),n=0;n<=s;n++)for(var r=0;r<t.option.atomColCount;r++)i[n][r]=1;e.push(i)})),{animName:"T2B",animArr:[e,e.concat([]).reverse()],animTime:[700,700]}},COP:function(){for(var t=[],e=0,o=0,s=0;;){var i=e,n=this.option.atomRowCount-(e+1),r=this.makeNewArr();for(o=0;o<=i;o++)for(s=0;s<this.option.atomColCount;s++)r[o][s]=1;for(o=this.option.atomRowCount-1;o>=n;o--)for(s=0;s<this.option.atomColCount;s++)r[o][s]=1;if(t.push(r),i===n||1===Math.abs(i-n))break;e++}return{animName:"COP",animArr:[t,t.concat([]).reverse()],animTime:[600,600]}}},r.LETTER={A:[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,1]],B:[[1,1,1,1,0],[0,1,0,0,1],[0,1,1,1,0],[0,1,0,0,1],[1,1,1,1,0]],C:[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,0],[1,0,0,0,1],[0,1,1,1,0]],D:[[1,1,1,1,0],[0,1,0,0,1],[0,1,0,0,1],[0,1,0,0,1],[1,1,1,1,0]],E:[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,0],[1,0,0,0,0],[1,1,1,1,1]],F:[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0]],G:[[0,1,1,1,0],[1,0,0,0,0],[1,0,1,1,1],[1,0,0,0,1],[0,1,1,1,0]],H:[[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1]],I:[[0,1,1,1,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,1,1,1,0]],J:[[0,1,1,1,0],[0,0,0,1,0],[0,0,0,1,0],[1,0,0,1,0],[0,1,1,0,0]],K:[[0,1,0,0,1],[0,1,0,1,0],[0,1,1,0,0],[0,1,0,1,0],[0,1,0,0,1]],L:[[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,0]],M:[[1,1,1,1,0],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1]],N:[[1,0,0,0,1],[1,1,0,0,1],[1,0,1,0,1],[1,0,0,1,1],[1,0,0,0,1]],O:[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],P:[[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0]],Q:[[0,1,1,0,0],[1,0,0,1,0],[1,0,0,1,0],[1,0,0,1,0],[0,1,1,1,1]],R:[[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0],[1,0,1,0,0],[1,0,0,1,1]],S:[[0,1,1,1,1],[1,0,0,0,0],[0,1,1,1,0],[0,0,0,0,1],[1,1,1,1,0]],T:[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],U:[[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],V:[[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0]],W:[[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[1,1,1,1,0]],X:[[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0],[0,1,0,1,0],[1,0,0,0,1]],Y:[[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],Z:[[1,1,1,1,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,1,1,1,1]]},y.prototype.update=function(){Date.now()-(this.lastTime||0)>=this.time&&(this.currentFram=0===this.currentFram?1:0,this.lastTime=Date.now())},y.prototype.getCurrentFrame=function(){return this.frams[this.currentFram]},e.WzwBomb=y,e.WzwScreen=r},function(t,e,o){"use strict";var s=o(2).WzwLauncher,i=o(3).Clicker,n=o(4),r=n.Snake,a=n.Tank,h=n.Tetris,f=new s("#screen",{testspan:document.querySelector("#testspan")});f.regGame("A",new a),f.regGame("B",new h),f.regGame("C",new r);var u={};function l(t){f.onKeyUp(t),function(t){var e=document.querySelector("#"+t);e.className=e.className.replace(/ active/g,"")}(t);var e=u[t];e&&e.release()}function c(t){var e=u[t];e||(e=u[t]=new i).onClick((function(){f.onKeyDown(t),function(t){var e=document.querySelector("#"+t);e.className.indexOf("active")<0&&(e.className=e.className+" active")}(t)})),e.push()}var m={w:function(){l("up")},a:function(){l("left")},s:function(){l("down")},d:function(){l("right")}," ":function(){l("rotate")},z:function(){l("start")},x:function(){l("voice")},c:function(){l("onoff")},v:function(){l("reset")}},p={w:function(){c("up")},a:function(){c("left")},s:function(){c("down")},d:function(){c("right")}," ":function(){c("rotate")},z:function(){c("start")},x:function(){c("voice")},c:function(){c("onoff")},v:function(){c("reset")}};window.onkeyup=function(t){var e=m[String(t.key).toLowerCase()];e&&e(),t.stopPropagation(),t.preventDefault?t.preventDefault():(t.returnValue=!1,window.event.returnValue=!1)},window.onkeydown=function(t){var e=p[String(t.key).toLowerCase()];e&&e(),t.stopPropagation(),t.preventDefault?t.preventDefault():(t.returnValue=!1,window.event.returnValue=!1)};var d="mousedown",w="mouseup",v=navigator.userAgent;(v.indexOf("Android")>-1||v.indexOf("Linux")>-1||v.indexOf("iPhone")>-1)&&(d="touchstart",w="touchend");for(var g=document.querySelectorAll("button.btn[id]"),y=0;y<g.length;y++)g[y].addEventListener(d,(function(t){c(this.id),t.stopPropagation(),t.preventDefault?t.preventDefault():(t.returnValue=!1,window.event.returnValue=!1)})),g[y].addEventListener(w,(function(t){l(this.id),t.stopPropagation(),t.preventDefault?t.preventDefault():(t.returnValue=!1,window.event.returnValue=!1)}));setTimeout((function(){f.reboot()}),500)},function(t,e,o){"use strict";var s=o(0).WzwScreen;function i(t,e){this.screen=new s(t,e),this.games=[],this.atoms=void 0,this.currentGame=void 0,this.screen.regLogic(a.bind(this)),this.letterCache={},this.current=0,this.status=i.STATUS.OFFED}function n(t){this.status!==i.STATUS.OFFED&&this.status!==i.STATUS.OFFINGHALF&&(!this.games||this.games.length<1||this.currentGame&&this.currentGame.onKeyDown&&this.currentGame.onKeyDown(t))}function r(t){if(this.status!==i.STATUS.OFFED){if(this.status===i.STATUS.BOOTED||this.status===i.STATUS.GAMEING){if("onoff"===t)return void this.turnOff();if(!this.games||this.games.length<1)return;if(this.currentGame)this.currentGame.onKeyup&&this.currentGame.onKeyup(t);else{if("rotate"===t)return void(this.current>=this.games.length-1?this.current=0:this.current++);if("start"===t)return void this.start()}if("reset"===t)return void this.reboot()}}else"onoff"===t&&this.reboot()}function a(){if(this.status===i.STATUS.OFFED||this.status===i.STATUS.OFFINGHALF)return this.screen.updateAtomArr(null),this.screen.updateStatusAtoms(null),this.screen.setScore(0),this.screen.setLevel(0),this.screen.setBest(0),void this.screen.setPause(!1);if(this.status!==i.STATUS.BOOTING){if(!this.games||this.games.length<=0)return this.atoms=h.call(this),this.screen.updateAtomArr(this.atoms),void this.screen.updateStatusAtoms(null);this.currentGame?(this.atoms=this.currentGame.onUpdate(),this.statusAtoms=this.currentGame.onUpdateStatus()):(this.atoms=f.call(this),this.statusAtoms=void 0),this.screen.updateAtomArr(this.atoms),this.screen.updateStatusAtoms(this.statusAtoms)}}function h(){if(this.emptyArr)return this.emptyArr;var t=this,e=Math.floor(t.screen.option.atomRowCount/2)-4;return this.emptyArr=t.screen.makeNewArr((function(o,s){return o<e||o>=t.screen.option.atomRowCount-e?1:0})),s.mergeArr(s.LETTER.M,t.emptyArr,e+1,2),console.log("目前还没有注册任何游戏。"),this.emptyArr}function f(){var t=this.games[this.current],e=this.letterCache[t.letter],o=Math.floor(this.screen.option.atomRowCount/2);if(!e){var i=s.LETTER[t.letter];e=this.screen.makeNewArr((function(t,e){if(t<=o){var s=t-3,n=e-3;return i.length>s&&s>-1&&i[s].length>n&&n>-1?0===i[s][n]?1:0:1}return 0})),this.letterCache[t.letter]=e}return s.mergeArr(t.game.getPreviewAtoms(),e,o+1,0),e}i.prototype.regGame=function(t,e){this.games.push({game:e,letter:t}),e.onRegLaunch(this)},i.prototype.nextGame=function(){this.currentGame||this.current>=this.games.length-1||this.current++},i.prototype.prevGame=function(){this.currentGame||this.current<=0||this.current--},i.prototype.start=function(){var t=this;t.starting||(t.starting=!0,t.status===i.STATUS.BOOTED&&t.games.length>0&&(t.currentGame||(t.status=i.STATUS.GAMEING,t.screen.playAnim(s.ANIM.COP,(function(e,o){0===o?(t.currentGame=t.games[t.current].game,t.starting=!1):1===o?t.currentGame.onLaunch():-1===o&&(t.currentGame?t.status=i.STATUS.GAMEING:t.status=i.STATUS.BOOTED,t.starting=!1)})))))},i.prototype.exitCurentGame=function(){this.status=i.STATUS.BOOTED,this.currentGame=void 0},i.prototype.reboot=function(){var t=this;t.status=i.STATUS.BOOTING,t.screen.playAnim(s.ANIM.CIRCLE,(function(e,o){0===o?(t.status=i.STATUS.BOOTINGHALF,t.currentGame&&t.currentGame.onDestroy&&t.currentGame.onDestroy(),t.currentGame=null):1===o&&(t.status=i.STATUS.BOOTED)}))},i.prototype.turnOff=function(){var t=this;t.status=i.STATUS.OFFING,t.screen.playAnim(s.ANIM.T2B,(function(e,o){0===o?t.status=i.STATUS.OFFINGHALF:1===o&&(t.status=i.STATUS.OFFED,t.current=0,t.currentGame=null)}))},i.prototype.onKeyUp=function(t){r.call(this,t)},i.prototype.onKeyDown=function(t){n.call(this,t)},i.STATUS={BOOTING:2,BOOTINGHALF:3,BOOTED:4,GAMEING:5,OFFING:6,OFFINGHALF:7,OFFED:8},e.WzwLauncher=i},function(t,e,o){"use strict";function s(t){this.option=t||{timeout:240,dely:45},this.clicks=[],this.tasks=[]}function i(){for(var t=this.clicks||[],e=0;e<t.length;e++){var o=t[e];o&&o()}}s.prototype.onClick=function(t){this.clicks.push(t)},s.prototype.push=function(t,e){if(!this.holding){this.holding=!0,e=e||this.option.timeout,i.call(this,t);var o=this;o.tasks.push(setTimeout((function e(){o.holding&&(i.call(o,t),o.tasks.push(setTimeout(e,o.option.dely)))}),e))}},s.prototype.release=function(){for(this.holding=!1;this.tasks.length>0;){var t=this.tasks.shift();clearTimeout(t)}},e.Clicker=s},function(t,e,o){"use strict";var s=o(5).Snake,i=o(6).Tank,n=o(7).Tetris;t.exports={Snake:s,Tank:i,Tetris:n}},function(t,e,o){"use strict";var s=o(0),i=s.WzwScreen,n=s.WzwBomb,r=1,a=2,h=3,f=4;function u(t,e,o,s,i){this.offsetRow=t,this.offsetCol=e,this.direction=o,this.pre=s,this.next=i}function l(){this.timeSpace=320,this.initPreview()}u.prototype.pushFood=function(t){this.food=t},u.prototype.update=function(){if(this.food){var t=this.next;this.next=new u(this.food[0],this.food[1],void 0,this,t),t.pre=this.next,this.food=void 0}else this.next&&this.next.update();if(this.pre)this.offsetRow=this.pre.offsetRow,this.offsetCol=this.pre.offsetCol;else switch(this.nextDirection&&(this.direction=this.nextDirection,this.nextDirection=void 0),this.direction){case r:this.offsetRow-=1;break;case f:this.offsetCol-=1;break;case h:this.offsetRow+=1;break;case a:this.offsetCol+=1}},u.prototype.applyAtoms=function(t){this.next&&this.next.applyAtoms(t);try{t[this.offsetRow][this.offsetCol]=1}catch(t){}},u.prototype.turnTo=function(t){this.pre||(this.direction===h&&t!==r||this.direction===f&&t!==a||this.direction===a&&t!==f||this.direction===r&&t!==h)&&(this.nextDirection=t)},u.prototype.isAtomsIn=function(t,e){return this.offsetRow===t&&this.offsetCol===e||!!this.next&&this.next.isAtomsIn(t,e)},l.prototype.onRegLaunch=function(t){this.launch=t},l.prototype.getPreviewAtoms=function(){var t;return Date.now()-(this.previewLastTime||0)>=this.previewTimeSpace&&(t=this.previewArr[this.previewIndex],this.previewIndex++,this.previewIndex>=this.previewArr.length-1&&(this.previewIndex=0),this.previewLastTime=Date.now()),t},l.prototype.onLaunch=function(){var t=parseInt(this.launch.screen.option.atomRowCount/2),e=parseInt(this.launch.screen.option.atomColCount/2);this.snakeHead=new u(t,e,r,void 0,void 0);var o=new u(this.snakeHead.offsetRow+1,e,null,this.snakeHead,void 0);this.snakeHead.next=o,o.next=new u(o.offsetRow+1,e,null,o,void 0),this.food=this.makeFood(),this.live=!0,this.paused=!1,this.score=0,this.best=i.storeGet("snakeBest")||0,this.launch.screen.setBest(this.best)},l.prototype.onUpdate=function(){if(this.atoms=this.launch.screen.makeNewArr(),this.snakeHead){if(Date.now()-(this.gameLastTime||0)>(this.turbo?30:this.timeSpace)){if(this.food&&this.snakeHead.isAtomsIn(this.food[0],this.food[1])&&(this.score+=1,this.launch.screen.setScore(this.score),this.score>=this.best&&(this.best=this.score,this.launch.screen.setBest(this.best),i.storeSet("snakeBest",this.best)),this.snakeHead.pushFood(this.food),this.food=this.makeFood()),this.live&&!this.paused&&this.snakeHead.update(),(this.snakeHead.next.isAtomsIn(this.snakeHead.offsetRow,this.snakeHead.offsetCol)||this.snakeHead.offsetRow<0||this.snakeHead.offsetCol<0||this.snakeHead.offsetRow>=this.launch.screen.option.atomRowCount||this.snakeHead.offsetCol>=this.launch.screen.option.atomColCount)&&(this.live=!1),!this.live&&!this.bomb){var t=this;this.bomb=new n({offsetRow:t.snakeHead.offsetRow-2,offsetCol:t.snakeHead.offsetCol-2,onEnd:function(){t.uiGameover()}})}this.gameLastTime=Date.now()}this.atoms&&(this.food&&Date.now()-(this.foodLastTime||0)>60&&(this.atoms[this.food[0]][this.food[1]]=1===this.atoms[this.food[0]][this.food[1]]?0:1,this.foodLastTime=Date.now()),this.snakeHead.applyAtoms(this.atoms))}return this.atoms&&this.bomb&&(this.bomb.update(),i.mergeArr(this.bomb.getCurrentFrame(),this.atoms,this.bomb.offsetRow,this.bomb.offsetCol)),this.atoms},l.prototype.onUpdateStatus=function(){},l.prototype.onDestroy=function(){this.launch.screen.setScore(0),this.launch.screen.setBest(0),this.launch.screen.setPause(!1),this.launch.screen.setLevel(0),this.snakeHead=void 0,this.bomb=void 0,this.live=!1,this.turbo=!1,this.food=void 0,this.paused=!1,this.best=0,this.launch.exitCurentGame()},l.prototype.onKeyup=function(t){"rotate"===t&&(this.turbo=!1)},l.prototype.onKeyDown=function(t){if("start"===t&&(this.paused=!this.paused,this.launch.screen.setPause(this.paused)),this.snakeHead){if(this.paused)return;switch(t){case"up":this.snakeHead.turnTo(r);break;case"right":this.snakeHead.turnTo(a);break;case"down":this.snakeHead.turnTo(h);break;case"left":this.snakeHead.turnTo(f);break;case"rotate":this.turbo=!0}}},l.prototype.initPreview=function(){this.previewIndex=0,this.previewTimeSpace=200,this.previewArr=[[[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,1,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,1,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,1,0,0,0],[0,1,1,1,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,1,0,0,0,0,0,1,0,0,0],[0,1,1,1,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,1,1,1,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,1,1,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,1,1,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,1,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,1,0],[0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,1,1,0],[0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,1,1,1,0],[0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,1,1,1,1,0],[0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,1,1,1,1,1,0],[0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,1,1,1,1,1,1,0],[0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]]]},l.prototype.makeFood=function(){var t=[i.random(0,this.launch.screen.option.atomRowCount),i.random(0,this.launch.screen.option.atomColCount)];if(this.snakeHead)for(;this.snakeHead.isAtomsIn(t[0],t[1]);)t=[i.random(0,this.launch.screen.option.atomRowCount),i.random(0,this.launch.screen.option.atomColCount)];return t},l.prototype.uiGameover=function(){var t=this;this.launch.screen.playAnim(i.ANIM.B2T,(function(e,o){0===o&&t.onDestroy()}))},e.Snake=l},function(t,e,o){"use strict";var s=o(0),i=s.WzwScreen,n=s.WzwBomb,r=[550,540,530,520,500,490,480,470,450,430,410,400,380,350,340,330,300,280,260,240,200],a={0:15,1:20,2:25,3:32,4:40,5:50,6:60,7:75,8:90,9:100,10:110,11:120,12:130,13:140,14:150,15:160,16:170,17:180,18:190,19:200,20:300},h=1,f=2,u=1,l=2,c=3,m=4,p=function(){return[[0,1,0],[1,1,1],[1,0,1]]},d=function(){return[[1,1,0],[0,1,1],[1,1,0]]},w=function(){return[[1,0,1],[1,1,1],[0,1,0]]},v=function(){return[[0,1,1],[1,1,0],[0,1,1]]},g=1,y=2,C=3,A=6;function k(t,e){this.tanker=t,this.direction=this.tanker.direction,this.time=42,this.available=!0,this.onUnAvailable=e,this.initBallOffset()}function b(t,e,o,s,i){this.width=3,this.height=3,this.offsetRow=t,this.offsetCol=e,this.role=o,this.direction=s,this.balls=[],this.tank=i,this.launch=i.launch,this.heropointtime=20,this.initAtoms(),this.init()}function S(t,e,o,s){this.boss=!0,this.direction=c,this.offsetRow=-8,this.offsetCol=t,this.hp=e,this.tank=s,this.launch=s.launch,this.balls=[],this.role=f,this.fram=[[1,1,0,0,0,1,1],[0,1,0,0,0,1,0],[1,0,1,1,1,0,1],[0,1,1,0,1,1,0],[1,0,1,1,1,0,1],[0,1,0,1,0,1,0],[1,1,0,1,0,1,1],[0,0,0,1,0,0,0]],this.status=S.STATUS.SHOWING,this.moveStepTime=o,this.way="left",this.wayCount=1,this.showingStepTime=100}function T(){R.call(this)}function R(){this.preview_index=0,this.preview_lasttime=Date.now(),this.preview_timespace=200,this.previewAtom=[[[1,0,1,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,0,0,0,0,0,0,0],[0,0,0,1,1,0,0,1,0,0,0],[0,0,1,1,0,0,0,0,0,0,0]],[[1,0,1,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,1,0],[0,0,1,1,0,0,0,0,0,0,0],[0,0,0,1,1,0,0,0,1,0,0],[0,0,1,1,0,0,0,0,0,0,0]],[[1,0,1,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,0,0,0,0,1,0],[0,0,0,0,1,1,0,0,0,1,0],[0,0,0,1,1,0,0,0,0,0,0]],[[1,1,0,0,0,0,0,0,0,0,0],[0,1,1,0,0,0,0,0,0,1,0],[1,1,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0],[0,1,0,0,0,1,1,0,0,1,1],[0,0,0,0,1,1,0,0,0,0,0]],[[0,1,1,0,0,0,0,0,0,0,0],[0,0,1,1,1,0,0,0,0,1,0],[0,1,1,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,0,0],[0,0,0,0,0,0,1,1,0,0,0],[0,1,0,0,0,1,1,0,0,1,0]],[[0,1,1,0,0,0,0,0,0,1,0],[0,0,1,1,0,1,0,0,1,1,1],[0,1,1,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0]],[[0,1,1,0,0,0,0,0,0,1,1],[0,0,1,1,0,0,1,0,1,1,0],[0,1,1,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,1,0,1,0,0,0,0,0,1,1],[0,1,1,1,0,0,0,1,1,1,0],[0,0,1,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,0,0,0],[0,1,1,1,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,0,0,0],[0,1,1,1,0,0,1,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,1,0,0,0,0],[0,1,1,1,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]]]}function O(){this.level=0,this.shotCount=0,this.score=0,this.best=i.storeGet("tankBest")||0,this.launch.screen.setBest(this.best),this.lifes=[[0,0,0,0]],this.lifeCount=3;for(var t=0;t<this.lifeCount;t++)this.lifes.push([1,1,1,1]);D.call(this)}function D(){if(this.bomb=void 0,this.hreo=x.call(this),!this.hreo)return this.status=A,void P.call(this);this.tankers=[],this.status=g}function x(){if(this.lifeCount<=0)return null;this.lifeCount=this.lifeCount-1;for(var t=0;t<4-this.lifeCount;t++)this.lifes[t]=[0,0,0,0];var e=9,o=4;return this.bossMod&&(e=this.launch.screen.option.atomRowCount-3,o=0),new b(e,o,h,u,this)}function I(){if(!(this.tankers.length>=3)){var t=G.call(this,this.tankers,this.hreo),e=t[i.random(0,t.length)];"top_left"===e?this.tankers.push(new b(0,0,f,c,this)):"top_right"===e?this.tankers.push(new b(0,this.launch.screen.option.atomColCount-3,f,c,this)):"bottom_left"===e?this.tankers.push(new b(this.launch.screen.option.atomRowCount-3,0,f,u,this)):"bottom_right"===e&&this.tankers.push(new b(this.launch.screen.option.atomRowCount-3,this.launch.screen.option.atomColCount-3,f,u,this))}}function G(t,e){var o=[];return N(this.topLeftJudgeArr=this.topLeftJudgeArr||[[0,2],[1,2],[2,2],[2,0],[2,1]],t,e)||o.push("top_left"),N(this.topRightJudgeArr=this.topRightJudgeArr||[[0,this.launch.screen.option.atomColCount-3],[1,this.launch.screen.option.atomColCount-3],[2,this.launch.screen.option.atomColCount-3],[2,this.launch.screen.option.atomColCount-2],[2,this.launch.screen.option.atomColCount-1]],t,e)||o.push("top_right"),N(this.bottomLeftJudgeArr=this.bottomLeftJudgeArr||[[this.launch.screen.option.atomRowCount-1,2],[this.launch.screen.option.atomRowCount-2,2],[this.launch.screen.option.atomRowCount-3,2],[this.launch.screen.option.atomRowCount-3,1],[this.launch.screen.option.atomRowCount-3,0]],t,e)||o.push("bottom_left"),N(this.bottomRightJudgeArr=this.bottomRightJudgeArr||[[this.launch.screen.option.atomRowCount-1,this.launch.screen.option.atomColCount-3],[this.launch.screen.option.atomRowCount-2,this.launch.screen.option.atomColCount-3],[this.launch.screen.option.atomRowCount-3,this.launch.screen.option.atomColCount-3],[this.launch.screen.option.atomRowCount-3,this.launch.screen.option.atomColCount-2],[this.launch.screen.option.atomRowCount-3,this.launch.screen.option.atomColCount-1]],t,e)||o.push("bottom_right"),o}function N(t,e,o){for(var s=0;s<t.length;s++){for(var i=0;i<e.length;i++)if(e[i].isAtomIn(t[s][0],t[s][1]))return!0;if(o&&o.isAtomIn(t[s][0],t[s][1]))return!0}return!1}function P(){var t=this;t.status=C,t.launch.screen.playAnim(i.ANIM.B2T,(function(e,o){0===o&&(t.onDestroy(),t.launch.exitCurentGame())}))}k.prototype.initBallOffset=function(){if(this.tanker.boss)return this.offsetRow=this.tanker.offsetRow+7,void(this.offsetCol=this.tanker.offsetCol+3);if(this.tanker.direction===u)this.offsetRow=this.tanker.offsetRow,this.offsetCol=this.tanker.offsetCol+1;else if(this.tanker.direction===l)this.offsetRow=this.tanker.offsetRow+1,this.offsetCol=this.tanker.offsetCol+2;else if(this.tanker.direction===c)this.offsetRow=this.tanker.offsetRow+2,this.offsetCol=this.tanker.offsetCol+1;else{if(this.tanker.direction!==m)throw new Error("未知的坦克方向。");this.offsetRow=this.tanker.offsetRow+1,this.offsetCol=this.tanker.offsetCol}},k.prototype.update=function(){this.available&&(Date.now()-(this.lastTime||0)>=this.time&&(this.direction===u?this.offsetRow=this.offsetRow-1:this.direction===l?this.offsetCol=this.offsetCol+1:this.direction===c?this.offsetRow=this.offsetRow+1:this.direction===m&&(this.offsetCol=this.offsetCol-1),this.lastTime=Date.now()),this.offsetAvailable(),this.checkKilled())},k.prototype.offsetAvailable=function(){(this.offsetRow<0||this.offsetRow>=this.tanker.launch.screen.option.atomRowCount||this.offsetCol<0||this.offsetCol>=this.tanker.launch.screen.option.atomColCount)&&(this.available=!1,this.onUnAvailable&&this.onUnAvailable(this))},k.prototype.checkKilled=function(){var t=this;try{if(t.tanker.role===h){if(i.each(t.tanker.tank.tankers,(function(e,o){if(e.isAtomIn(t.offsetRow,t.offsetCol))throw{message:"killed",index:o,tanker:e}})),t.tanker.tank.boss&&t.tanker.tank.boss.isAtomIn(t.offsetRow,t.offsetCol)){if(t.tanker.tank.boss.isAtomInGun(t.offsetRow,t.offsetCol))throw{message:"killed",index:0,tanker:t.tanker.tank.boss};throw{message:"hited",index:0}}}else if(t.tanker.role===f){if(t.tanker.tank.hreo&&t.tanker.tank.hreo.isAtomIn(t.offsetRow,t.offsetCol))throw{message:"killed",index:0,tanker:t.tanker.tank.hreo};if(t.tanker.tank.hreo&&t.tanker.tank.hreo.isAtomInAtom(t.offsetRow,t.offsetCol))throw{message:"hited",index:0}}}catch(e){"killed"===e.message?(e.tanker.role===f?e.tanker.boss?t.tanker.tank.onBossKill():(t.tanker.tank.tankers.splice(e.index,1),t.tanker.tank.onEofKill()):e.tanker.role===h&&t.available&&t.tanker.tank.status===g&&t.tanker.tank.onHeroKill(),t.available=!1,t.onUnAvailable&&t.onUnAvailable(t)):"hited"===e.message?(t.available=!1,t.onUnAvailable&&t.onUnAvailable(t)):console.warn("异常：",e)}},b.prototype.init=function(){this.role===f&&i.random(0,10)>6&&this.shoot()},b.prototype.initAtoms=function(){switch(this.direction){case u:this.atoms=p();break;case l:this.atoms=d();break;case c:this.atoms=w();break;case m:this.atoms=v();break;default:throw new Error("不支持的方向")}},b.prototype.applyAtom=function(t){for(var e=0;e<this.height;e++)for(var o=0;o<this.width;o++)(1===e&&1===o||1===this.atoms[e][o])&&(t[this.offsetRow+e][this.offsetCol+o]=this.atoms[e][o]);for(var s=0;s<this.balls.length;s++){var i=this.balls[s];i.available&&(t[i.offsetRow][i.offsetCol]=1)}},b.prototype.update=function(){this.role===h&&Date.now()-(this.heropointLastTime||0)>=this.heropointtime&&(this.atoms[1][1]=1===this.atoms[1][1]?0:1,this.heropointLastTime=Date.now());for(var t=0;t<this.balls.length;t++)this.balls[t].available&&this.balls[t].update()},b.prototype.updateEOF=function(){i.random(0,100)>=30?this.moveTo(this.direction,1):this.moveTo(this.getDiffDirection(),1),i.random(0,100)>=70&&this.shoot()},b.prototype.turnTo=function(t){this.atoms=p(),this.direction=u},b.prototype.moveTo=function(t,e){switch(t){case u:this.moveToUp(e);break;case l:this.moveToRight(e);break;case c:this.moveToBottom(e);break;case m:this.moveToLeft(e);break;default:throw new Error("未知的方向:"+t)}},b.prototype.moveToUp=function(t,e){if(this.direction!==u&&!e)return this.direction=u,void(this.atoms=p());this.offsetRow<=0||this.hasTankerOn(u)||(this.offsetRow-=t)},b.prototype.moveToRight=function(t,e){if(this.direction!==l&&!e)return this.direction=l,void(this.atoms=d());this.offsetCol+2>=this.launch.screen.option.atomColCount-1||this.hasTankerOn(l)||(this.offsetCol+=t)},b.prototype.moveToBottom=function(t,e){if(this.direction!==c&&!e)return this.direction=c,void(this.atoms=w());this.offsetRow+2>=this.launch.screen.option.atomRowCount-1||this.hasTankerOn(c)||(this.offsetRow+=t)},b.prototype.moveToLeft=function(t,e){if(this.direction!==m&&!e)return this.direction=m,void(this.atoms=v());this.offsetCol<=0||this.hasTankerOn(m)||(this.offsetCol-=t)},b.prototype.hasTankerOn=function(t){try{var e=0,o=0;switch(t){case m:e=-1;break;case u:o=-1;break;case l:e=1;break;case c:o=1}var s=this,n=s.getSideAtoms(t);i.each(s.tank.tankers,(function(t){s!==t&&i.each(n,(function(s){if(t.isAtomIn(s[0]+o,s[1]+e))throw"yes"}))})),s.role===f&&i.each(n,(function(t){if(s.tank.hreo&&s.tank.hreo.isAtomIn(t[0]+o,t[1]+e))throw"yes"}))}catch(t){return!0}return!1},b.prototype.getSideAtoms=function(t){switch(t){case m:return[[this.offsetRow+0,this.offsetCol+1],[this.offsetRow+1,this.offsetCol+0],[this.offsetRow+2,this.offsetCol+1]];case u:return[[this.offsetRow+1,this.offsetCol+0],[this.offsetRow+0,this.offsetCol+1],[this.offsetRow+1,this.offsetCol+2]];case l:return[[this.offsetRow+0,this.offsetCol+1],[this.offsetRow+1,this.offsetCol+2],[this.offsetRow+2,this.offsetCol+1]];case c:return[[this.offsetRow+1,this.offsetCol+0],[this.offsetRow+2,this.offsetCol+1],[this.offsetRow+1,this.offsetCol+2]]}},b.prototype.shoot=function(){var t=this;if(!(t.tank.status===y&&t.role===h||t.balls.length>=2)){var e=new k(this,(function(e){var o=t.balls.indexOf(e);o<=-1||t.balls.splice(o,1)}));t.balls.push(e)}},b.prototype.isAtomIn=function(t,e){return this.offsetRow<=t&&t<=this.offsetRow+2&&this.offsetCol<=e&&e<=this.offsetCol+2},b.prototype.isAtomInAtom=function(t,e){for(var o=0;o<this.balls.length;o++){var s=this.balls[o];if(s.available&&(s.offsetRow===t&&s.offsetCol===e))return s.available=!1,s.onUnAvailable&&s.onUnAvailable(s),!0}return!1},b.prototype.getDiffDirection=function(){var t;return this.direction===u?t=[l,c,m]:this.direction===l?t=[m,c,m]:this.direction===c?t=[l,u,m]:this.direction===m&&(t=[l,c,u]),t[i.random(0,t.length)]},S.prototype.updateAndApply=function(t){if(this.status===S.STATUS.SHOWING?Date.now()-(this.lastStepTime||0)>=this.showingStepTime&&(this.offsetRow+=1,this.offsetRow>=0&&(this.status=S.STATUS.SHOWED),this.lastStepTime=Date.now()):this.status===S.STATUS.SHOWED?Date.now()-(this.lastStepTime||0)>=this.moveStepTime&&("left"===this.way&&(this.offsetCol-=this.wayCount,this.offsetCol<0&&(this.way="right")),"right"===this.way&&(this.offsetCol+=this.wayCount,this.offsetCol+7>=this.tank.launch.screen.option.atomColCount&&(this.way="left")),this.shoot(),this.lastStepTime=Date.now()):this.status===S.STATUS.RUNAWAYING&&Date.now()-(this.lastStepTime||0)>=this.showingStepTime&&(this.offsetRow-=1,this.offsetRow<=-8&&(this.status=S.STATUS.RUNAWAYED,this.onRunAwayFun&&this.onRunAwayFun.call(this)),this.lastStepTime=Date.now()),i.mergeArr(this.fram,t,this.offsetRow,this.offsetCol),this.status===S.STATUS.SHOWED)for(var e=0;e<this.balls.length;e++){var o=this.balls[e];o.update(),o.available&&(t[o.offsetRow][o.offsetCol]=1)}},S.prototype.shoot=function(){var t=this,e=new k(t,(function(e){var o=t.balls.indexOf(e);o<=-1||t.balls.splice(o,1)}));t.balls.push(e)},S.prototype.hpDown=function(){this.hp-=1},S.prototype.getHp=function(){return this.hp},S.prototype.runAway=function(){this.status=S.STATUS.RUNAWAYING},S.prototype.setOnRunAway=function(t){this.onRunAwayFun=t},S.prototype.isAtomInGun=function(t,e){return this.status===S.STATUS.SHOWED&&(t===this.offsetRow+6&&this.offsetCol+3===e)},S.prototype.isAtomIn=function(t,e){return this.offsetRow<=t&&t<=this.offsetRow+6&&this.offsetCol<=e&&e<=this.offsetCol+6},S.STATUS={SHOWING:1,SHOWED:2,RUNAWAYING:3,RUNAWAYED:4},T.prototype.onRegLaunch=function(t){this.launch=t},T.prototype.getPreviewAtoms=function(){return Date.now()-this.preview_lasttime>=this.preview_timespace&&(this.preview_index++,this.preview_index>=this.previewAtom.length-1&&(this.preview_index=0),this.preview_lasttime=Date.now()),this.previewAtom[this.preview_index]},T.prototype.onLaunch=function(){O.call(this)},T.prototype.onUpdate=function(){if(this.status===C)return this.atoms;if(this.atoms=this.launch.screen.makeNewArr(),this.bossMod)this.boss&&this.boss.updateAndApply(this.atoms);else{if(this.tankers)for(var t=0;t<this.tankers.length;t++)this.tankers[t].update(),this.tankers[t].applyAtom(this.atoms);if(Date.now()-(this.gameLastTime||0)>=r[this.level]){if(I.call(this),this.tankers)for(var e=0;e<this.tankers.length;e++)this.tankers[e].updateEOF();this.gameLastTime=Date.now()}}return this.hreo&&(this.hreo.update(),this.hreo.applyAtom(this.atoms)),this.bomb&&this.status===y&&(this.bomb.update(),i.mergeArr(this.bomb.getCurrentFrame(),this.atoms,this.bomb.offsetRow,this.bomb.offsetCol)),this.atoms},T.prototype.onUpdateStatus=function(){return this.lifes},T.prototype.onDestroy=function(){this.hreo=void 0,this.score=0,this.level=0,this.tankers=[],this.bomb=void 0,this.status=A,this.boss=void 0,this.bossMod=!1,this.best=0,this.launch.screen.setBest(0),this.launch.screen.setScore(0),this.launch.screen.setLevel(0),this.launch.screen.setPause(!1)},T.prototype.onKeyup=function(t){"start"===t&&(this.status===C?(this.status=this.oldStatus,this.launch.screen.setPause(!1)):(this.oldStatus=this.status,this.status=C,this.launch.screen.setPause(!0)))},T.prototype.onKeyDown=function(t){if(this.hreo&&!this.autoMoving&&this.status!==C)if("up"===t){if(this.bossMod)return;this.hreo.moveToUp(1)}else if("right"===t)this.hreo.moveToRight(1,!!this.bossMod);else if("down"===t){if(this.bossMod)return;this.hreo.moveToBottom(1)}else"left"===t?this.hreo.moveToLeft(1,!!this.bossMod):"rotate"===t&&this.hreo.shoot()},T.prototype.goto=function(t,e){var o=this;o.autoMoving=!0,setTimeout((function s(){if(o.hreo.offsetCol!==t[1]){if(o.hreo.offsetCol<t[1])return o.hreo.moveToRight(1),void setTimeout(s,100);if(o.hreo.offsetCol>t[1])return o.hreo.moveToLeft(1),void setTimeout(s,100)}else if(o.hreo.offsetRow!==t[0]){if(o.hreo.offsetRow<t[0])return o.hreo.moveToBottom(1),void setTimeout(s,100);if(o.hreo.offsetRow>t[0])return o.hreo.moveToUp(1),void setTimeout(s,100)}else e&&e.call(o),o.autoMoving=!1}),200)},T.prototype.onEofKill=function(){this.score+=1,this.shotCount+=1,this.launch.screen.setScore(this.score),this.score>=this.best&&(this.best=this.score,this.launch.screen.setBest(this.best),i.storeSet("tankBest",this.best)),this.shotCount>=a[String(this.level)]&&this.levelUp()},T.prototype.levelUp=function(){var t=this;t.bossMod=!0,t.tankers=[],t.goto([this.launch.screen.option.atomRowCount-3,parseInt((this.launch.screen.option.atomColCount-1)/2-1)],(function(){t.hreo.turnTo(u),t.boss=new S(2,t.level+3,460,t),t.boss.setOnRunAway((function(){t.level+=1,t.shotCount=0,t.launch.screen.setLevel(t.level),t.boss=void 0,t.goto([parseInt((this.launch.screen.option.atomRowCount-1)/2-1),parseInt((this.launch.screen.option.atomColCount-1)/2-1)],(function(){t.bossMod=!1}))}))}))},T.prototype.onBossKill=function(){this.boss.hpDown(),this.boss.getHp()<=0&&this.boss.runAway()},T.prototype.onHeroKill=function(){this.status=y;var t=this;t.bomb=new n({offsetRow:t.hreo.offsetRow,offsetCol:t.hreo.offsetCol,onEnd:function(){D.call(t)}}),this.hreo=void 0},e.Tank=T},function(t,e,o){"use strict";var s=o(0).WzwScreen,i="playing",n="pause",r="over",a=[[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,0,0],[0,1,1,1],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,0,0],[0,1,0,0]],[[0,0,0,0],[0,1,1,1],[0,0,0,1],[0,0,0,0]],[[0,0,0,0],[0,0,1,0],[0,0,1,0],[0,1,1,0]],[[0,0,0,0],[0,1,1,1],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,1],[0,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,1],[0,0,1,0],[0,0,0,0]],[[0,0,0,0],[0,0,1,0],[0,1,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,1,0],[0,1,1,1],[0,0,0,0]],[[0,0,0,0],[0,0,1,0],[0,0,1,1],[0,0,1,0]],[[0,0,0,0],[0,1,1,0],[0,0,1,1],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,0,1,1],[0,0,0,0]],[[0,0,0,0],[0,0,1,0],[0,1,1,0],[0,1,0,0]],[[0,0,0,0],[0,0,1,0],[0,1,1,0],[0,1,0,0]],[[0,0,0,0],[0,0,1,1],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,0,1,1],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,0,0],[0,1,1,0],[0,0,1,0]],[[0,0,0,0],[0,1,0,0],[0,1,1,0],[0,0,1,0]]],h=[800,700,600,550,500,450,400,350,300,250,200,150,130,100,90,80,70,60,50,40,30,20,10,5],f={50:1,100:2,150:3,200:4,250:5,300:6,350:7,400:8,450:9,500:10,550:11,600:12,700:13,850:14,1e3:15,1100:16,1300:17,1500:18,2e3:19,2500:20,3e3:21,4e3:22,5e3:23};function u(){y.call(this),this.best=s.storeGet("tetrisBest")||0}function l(){var t=this;t.launch.screen.playAnim(s.ANIM.B2T,(function(e,o){0===o&&t.onDestroy()}))}function c(t){t>this.best&&m.call(this,t),this.launch.screen.setScore(t)}function m(t){this.best=t,s.storeSet("tetrisBest",t),this.launch.screen.setBest(t)}function p(t){this.launch.screen.setLevel(t)}function d(){for(var t=this,e=[],o=0;o<t.atomsed.length;o++){for(var i=!0,n=0;n<t.atomsed[o].length;n++)if(1!==t.atomsed[o][n]){i=!1;break}i&&(t.succAniming=!0,t.score+=1,e.push(o))}if(e.length>0){e.length>=4&&(t.score+=1),c.call(t,t.score);var r=f[String(t.score)];r>t.level&&(t.level=r,p.call(t,t.level));var a=!1;s.scroll(0,t.atoms[0].length-1,{goo:function(o){var i=t.atoms[0].length;o=o>=i?i:o;for(var n=function(o){s.each(e,(function(e,s){t.atoms[e][o]=0}))},r=0;r<o;r++)n(r)},end:function(o){for(var i=function(o){s.each(e,(function(e,s){t.atoms[e][o]=0}))},n=0;n<t.atoms[0].length;n++)i(n);setTimeout((function(){!function(){if(!a){for(a=!0;e.length>0;)for(var o=function(e){var o=e-1;t.atomsed[e]=[].concat(t.atomsed[o]),0===o&&(t.atomsed[o]=[],s.each(t.launch.screen.option.atomColCount,(function(e,s){t.atomsed[o][s]=0})))},i=e.shift();i>=1;i--)o(i);t.atoms=C(t.atomsed),t.succAniming=!1}}()}),50)}},240)}}function w(){var t=this;if(t.atoms&&t.stuff&&i===t.status){for(var e=[[],[],[],[]],o=0;o<t.stuff.length;o++)for(var n=0;n<t.stuff[o].length;n++){var r=n,a=t.stuff.length-1-o;if(e[r][a]=t.stuff[o][n],!(t.stuffOffsetRow+r<0)){if(t.stuffOffsetRow+r>=t.atoms.length)return;if(t.stuffOffsetCol+a>=t.atoms[0].length||t.stuffOffsetCol+a<0)return;if(1===t.atomsed[t.stuffOffsetRow+r][t.stuffOffsetCol+a])return}}t.stuff=e,t.atoms=s.mergeArr2(t.stuff,t.atomsed,t.stuffOffsetRow,t.stuffOffsetCol,(function(e,o,s,i){return 1===t.stuff[s][i]?t.stuff[s][i]:t.atomsed[e][o]}))}}function v(t){var e=this,o=e.stuffOffsetCol+t;if(e.atoms&&e.stuff&&e.atomsed&&e.status===i){for(var n=0;n<e.stuff.length;n++)for(var r=0;r<e.stuff[n].length;r++)if(1===e.stuff[n][r]&&(o+r<0?o=-r:o+r>e.atomsed[0].length-1&&(o=e.atomsed[0].length-r-1),!(e.stuffOffsetRow+n<0)&&1===e.atomsed[e.stuffOffsetRow+n][o+r]))return;e.stuffOffsetCol=o,e.atoms=s.mergeArr2(e.stuff,e.atomsed,e.stuffOffsetRow,e.stuffOffsetCol,(function(t,o,s,i){return 1===e.stuff[s][i]?e.stuff[s][i]:e.atomsed[t][o]}))}}function g(){return[].concat(a[s.random(0,a.length)])}function y(){this.preview_index=0,this.preview_lasttime=Date.now(),this.preview_timespace=200,this.previewAtom=[[[0,0,0,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,0,0],[1,1,1,1,0,1,1,1,1,0,1],[1,1,1,1,1,1,1,1,1,0,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,0,0],[1,1,1,1,0,1,1,1,1,0,1],[1,1,1,1,1,1,1,1,1,0,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,0,0],[1,1,1,1,0,1,1,1,1,0,1],[1,1,1,1,1,1,1,1,1,0,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,1,0],[0,1,0,1,0,0,0,0,1,0,0],[1,1,1,1,0,1,1,1,1,0,1],[1,1,1,1,1,1,1,1,1,0,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1],[0,1,0,0,0,0,0,0,0,1,0],[0,1,0,1,0,0,0,0,1,1,0],[1,1,1,1,0,1,1,1,1,0,1],[1,1,1,1,1,1,1,1,1,0,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,1,1],[0,1,0,1,0,0,0,0,1,1,0],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,1,0,0,1,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0],[0,1,0,0,1,0,0,0,0,0,0],[0,1,0,1,1,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,1,1,0,0,0,0,0],[0,1,0,1,1,0,0,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,1,0,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,1,0,0,1,1,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,1,0,0,1,1,1]],[[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,1,0,0,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,1,0,0,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,1,0,0,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,1,0,0,1,1,1]]]}function C(t){for(var e=[],o=0;o<t.length;o++){e[o]=[];for(var s=0;s<t[s].length;s++)e[o][s]=t[o][s]}return e}function A(t,e,o,s){var i=!1;t:for(var n=o.length-1;n>=0;n--)for(var r=o[n].length-1;r>=0;r--)if(1===o[n][r]){var a=e+n;if(!(a<0)){var h=t+r;if(!(h<0)){if(a!==s.length-1&&1!==s[a+1][h]||(i=!0),0===a&&i)throw new Error("gameover");if(i)break t}}}return i}u.prototype.onRegLaunch=function(t){this.launch=t},u.prototype.getPreviewAtoms=function(){return Date.now()-this.preview_lasttime>=this.preview_timespace&&(this.preview_index++,this.preview_index>=this.previewAtom.length-1&&(this.preview_index=0),this.preview_lasttime=Date.now()),this.previewAtom[this.preview_index]},u.prototype.reset=function(){this.atoms=this.launch.screen.makeNewArr(),this.atomsed=this.launch.screen.makeNewArr(),this.level=0,this.succAniming=!1,this.score=0,this.stuffOffsetRow=-3,this.stuffOffsetCol=3,this.gameLastTime=0,this.status=r,this.turbo=!1,this.launch.screen.setLevel(this.level),this.launch.screen.setScore(this.score),this.launch.screen.setBest(this.best)},u.prototype.turboModeON=function(){this.turbo=!0},u.prototype.turboModeOFF=function(){this.turbo=!1},u.prototype.onLaunch=function(){this.reset(),this.stuff=g.call(this),this.nextStuff=g.call(this),this.status=i},u.prototype.onUpdate=function(){var t=this;if(t.atoms){if(Date.now()-t.gameLastTime>=(t.turbo?3:h[t.level])&&!t.succAniming){if(t.status===i)try{var e=!1;t.stuff||(t.stuff=t.nextStuff,t.nextStuff=null,e=!!t.stuff),t.stuff||(t.stuff=g.call(t),t.nextStuff=null,e=!!t.stuff),t.nextStuff||(t.nextStuff=g.call(t),e=!!t.stuff),e&&t.turboModeOFF();var o=A.call(t,t.stuffOffsetCol,t.stuffOffsetRow,t.stuff,t.atomsed);o||(t.stuffOffsetRow+=1,t.atoms=s.mergeArr2(t.stuff,t.atomsed,t.stuffOffsetRow,t.stuffOffsetCol,(function(e,o,s,i){return 1===t.stuff[s][i]?t.stuff[s][i]:t.atomsed[e][o]}))),o&&(t.atomsed=C(t.atoms),t.stuff=void 0,t.stuffOffsetRow=-3,t.stuffOffsetCol=3,d.call(t))}catch(e){"gameover"===e.message?(t.status=r,l.call(t)):console.error(e)}else t.status===n||t.status;t.gameLastTime=Date.now()}return t.atoms}},u.prototype.onUpdateStatus=function(){return this.nextStuff},u.prototype.pause=function(){this.status===i?(this.status=n,this.tempNextStuff=this.nextStuff,this.nextStuff=null,this.launch.screen.setPause(!0)):(this.status=i,this.nextStuff=this.tempNextStuff,this.tempNextStuff=null,this.launch.screen.setPause(!1))},u.prototype.onKeyup=function(t){"down"===t&&this.turboModeOFF()},u.prototype.onKeyDown=function(t){if("reset"===t||"start"===t)this.pause();else if("left"===t){if(this.status===n)return;v.call(this,-1)}else if("right"===t){if(this.status===n)return;v.call(this,1)}else if("rotate"===t||"up"===t){if(this.status===n)return;w.call(this)}else if("down"===t){if(this.status===n)return;this.turboModeON()}},u.prototype.onDestroy=function(){this.reset(),this.launch.screen.setBest(0),this.launch.screen.setScore(0),this.launch.screen.setPause(!1),this.launch.exitCurentGame()},e.Tetris=u}]);